!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("element-ui"),require("@panhezeng/utils/dist/check-upload.js"),require("@panhezeng/el-popover-dialog")):"function"==typeof define&&define.amd?define("ElSingleUpload",["element-ui","@panhezeng/utils/dist/check-upload.js","@panhezeng/el-popover-dialog"],n):"object"==typeof exports?exports.ElSingleUpload=n(require("element-ui"),require("@panhezeng/utils/dist/check-upload.js"),require("@panhezeng/el-popover-dialog")):e.ElSingleUpload=n(e.ELEMENT,e["@panhezeng/utils/dist/check-upload.js"],e["@panhezeng/el-popover-dialog"])}(window,function(e,n,t){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=15)}([function(n,t){n.exports=e},function(e,n,t){var r=t(44);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,t(47).default)("0b99bd7f",r,!1,{})},function(e,n){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},function(e,n){var t=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)},function(e,n){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,n,t){e.exports=!t(6)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,n){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,n){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},function(e,n,t){var r=t(9),o=t(10);e.exports=function(e){return r(o(e))}},function(e,n,t){var r=t(31);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,n){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,n){var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},function(e,n,t){e.exports={default:t(16),__esModule:!0}},function(e,t){e.exports=n},function(e,n){e.exports=t},function(e,n,t){"use strict";t.r(n),t.d(n,"ElSingleUpload",function(){return i});var r=t(12),o=t.n(r),i=t(46).default,a=void 0;function l(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"!=typeof window&&window.ElSingleUploadOptions;a?console.warn("[ElSingleUpload] already installed. Vue.use(ElSingleUpload) should be called only once."):(a=e,"[object Object]"===Object.prototype.toString.call(n)&&"[object Function]"===Object.prototype.toString.call(n.upload)&&o()(i.props.upload,{required:!1,default:n.upload}),a.component(i.name,i))}i.install=l,"undefined"!=typeof window&&window.Vue&&l(window.Vue)},function(e,n,t){t(17),e.exports=t(3).Object.assign},function(e,n,t){var r=t(18);r(r.S+r.F,"Object",{assign:t(28)})},function(e,n,t){var r=t(2),o=t(3),i=t(19),a=t(21),l=t(7),u=function(e,n,t){var s,c,p,d=e&u.F,f=e&u.G,h=e&u.S,g=e&u.P,v=e&u.B,y=e&u.W,b=f?o:o[n]||(o[n]={}),m=b.prototype,x=f?r:h?r[n]:(r[n]||{}).prototype;for(s in f&&(t=n),t)(c=!d&&x&&void 0!==x[s])&&l(b,s)||(p=c?x[s]:t[s],b[s]=f&&"function"!=typeof x[s]?t[s]:v&&c?i(p,r):y&&x[s]==p?function(e){var n=function(n,t,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,t)}return new e(n,t,r)}return e.apply(this,arguments)};return n.prototype=e.prototype,n}(p):g&&"function"==typeof p?i(Function.call,p):p,g&&((b.virtual||(b.virtual={}))[s]=p,e&u.R&&m&&!m[s]&&a(m,s,p)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,n,t){var r=t(20);e.exports=function(e,n,t){if(r(e),void 0===n)return e;switch(t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,r){return e.call(n,t,r)};case 3:return function(t,r,o){return e.call(n,t,r,o)}}return function(){return e.apply(n,arguments)}}},function(e,n){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,n,t){var r=t(22),o=t(27);e.exports=t(5)?function(e,n,t){return r.f(e,n,o(1,t))}:function(e,n,t){return e[n]=t,e}},function(e,n,t){var r=t(23),o=t(24),i=t(26),a=Object.defineProperty;n.f=t(5)?Object.defineProperty:function(e,n,t){if(r(e),n=i(n,!0),r(t),o)try{return a(e,n,t)}catch(e){}if("get"in t||"set"in t)throw TypeError("Accessors not supported!");return"value"in t&&(e[n]=t.value),e}},function(e,n,t){var r=t(4);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,n,t){e.exports=!t(5)&&!t(6)(function(){return 7!=Object.defineProperty(t(25)("div"),"a",{get:function(){return 7}}).a})},function(e,n,t){var r=t(4),o=t(2).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,n,t){var r=t(4);e.exports=function(e,n){if(!r(e))return e;var t,o;if(n&&"function"==typeof(t=e.toString)&&!r(o=t.call(e)))return o;if("function"==typeof(t=e.valueOf)&&!r(o=t.call(e)))return o;if(!n&&"function"==typeof(t=e.toString)&&!r(o=t.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,n){e.exports=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}}},function(e,n,t){"use strict";var r=t(29),o=t(40),i=t(41),a=t(42),l=t(9),u=Object.assign;e.exports=!u||t(6)(function(){var e={},n={},t=Symbol(),r="abcdefghijklmnopqrst";return e[t]=7,r.split("").forEach(function(e){n[e]=e}),7!=u({},e)[t]||Object.keys(u({},n)).join("")!=r})?function(e,n){for(var t=a(e),u=arguments.length,s=1,c=o.f,p=i.f;u>s;)for(var d,f=l(arguments[s++]),h=c?r(f).concat(c(f)):r(f),g=h.length,v=0;g>v;)p.call(f,d=h[v++])&&(t[d]=f[d]);return t}:u},function(e,n,t){var r=t(30),o=t(39);e.exports=Object.keys||function(e){return r(e,o)}},function(e,n,t){var r=t(7),o=t(8),i=t(32)(!1),a=t(35)("IE_PROTO");e.exports=function(e,n){var t,l=o(e),u=0,s=[];for(t in l)t!=a&&r(l,t)&&s.push(t);for(;n.length>u;)r(l,t=n[u++])&&(~i(s,t)||s.push(t));return s}},function(e,n){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e,n,t){var r=t(8),o=t(33),i=t(34);e.exports=function(e){return function(n,t,a){var l,u=r(n),s=o(u.length),c=i(a,s);if(e&&t!=t){for(;s>c;)if((l=u[c++])!=l)return!0}else for(;s>c;c++)if((e||c in u)&&u[c]===t)return e||c||0;return!e&&-1}}},function(e,n,t){var r=t(11),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,n,t){var r=t(11),o=Math.max,i=Math.min;e.exports=function(e,n){return(e=r(e))<0?o(e+n,0):i(e,n)}},function(e,n,t){var r=t(36)("keys"),o=t(38);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,n,t){var r=t(3),o=t(2),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,n){return i[e]||(i[e]=void 0!==n?n:{})})("versions",[]).push({version:r.version,mode:t(37)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(e,n){e.exports=!0},function(e,n){var t=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+r).toString(36))}},function(e,n){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,n){n.f=Object.getOwnPropertySymbols},function(e,n){n.f={}.propertyIsEnumerable},function(e,n,t){var r=t(10);e.exports=function(e){return Object(r(e))}},function(e,n,t){"use strict";var r=t(1);t.n(r).a},function(e,n,t){(e.exports=t(45)(!1)).push([e.i,"\n.el-single-upload {\n  position: relative;\n  width: 300px;\n  height: 90px;\n  display: inline-block;\n}\n.el-single-upload .view {\n  line-height: 1;\n  display: block;\n  border: 1px solid #d9d9d9;\n  width: calc(100% - 2px);\n  height: 100%;\n}\n.el-single-upload .upload {\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  position: relative;\n  line-height: 1;\n}\n.el-single-upload .el-upload-dragger {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: none;\n}\n.el-single-upload .el-upload-dragger .el-icon-upload {\n  margin: 0;\n  line-height: normal;\n}\n.el-single-upload.input .view {\n  height: calc(100% - 40px);\n}\n.el-single-upload.input .upload {\n  height: calc(100% - 40px);\n}\n.el-single-upload .el-upload__input {\n  display: none !important;\n}\n.el-single-upload .el-upload {\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.el-single-upload .el-upload:hover {\n  border-color: #20a0ff;\n}\n.el-single-upload .upload.update {\n  position: absolute;\n  top: 0;\n  right: -25px;\n  z-index: 2;\n  width: auto;\n  height: auto;\n}\n.el-single-upload .upload.update .el-upload {\n  padding: 0 1px;\n  width: auto;\n  height: auto;\n  border-left: none;\n  border-radius: 0;\n}\n.el-single-upload .upload-btn {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 28px;\n}\n.el-single-upload .el-icon-upload {\n  font-size: 22px;\n  color: #8c939d;\n  background: #ffffff;\n}\n.el-single-upload .el-icon-upload:hover {\n  color: #20a0ff;\n}\n.el-single-upload .icon-delete {\n  position: absolute;\n  top: 26px;\n  right: -25px;\n  font-size: 23px;\n  cursor: pointer;\n  color: #8c939d;\n  border: 1px dashed #d9d9d9;\n  border-left: none;\n  padding: 0 1px;\n  line-height: 1;\n}\n.el-single-upload .icon-delete:hover {\n  border-color: #20a0ff;\n  color: #20a0ff;\n}\n.el-single-upload .tip {\n  padding: 10px 0;\n  text-align: center;\n}\n.el-single-upload.image,\n.el-single-upload.video {\n  width: 200px;\n  height: 200px;\n}\n.el-single-upload.image .img,\n.el-single-upload.video .img {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n}\n",""])},function(e,n){e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var t=function(e,n){var t=e[1]||"",r=e[3];if(!r)return t;if(n&&"function"==typeof btoa){var o=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r),i=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[t].concat(i).concat([o]).join("\n")}return[t].join("\n")}(n,e);return n[2]?"@media "+n[2]+"{"+t+"}":t}).join("")},n.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&r[a[0]]||(t&&!a[2]?a[2]=t:t&&(a[2]="("+a[2]+") and ("+t+")"),n.push(a))}},n}},function(e,n,t){"use strict";t.r(n);var r=function(){var e,n=this,t=n.$createElement,r=n._self._c||t;return r("div",{staticClass:"el-single-upload",class:(e={input:n.input},e[n.type]=!0,e)},[n.urlInternal?["video"===n.type?r("video",{ref:"media",staticClass:"view",attrs:{controls:"",src:n.urlInternal}}):"audio"===n.type?r("audio",{ref:"media",staticClass:"view",attrs:{controls:"",src:n.urlInternal}}):r("a",{staticClass:"view",attrs:{href:n.urlInternal,target:"_blank"}},["image"===n.type?r("img",{staticClass:"img",attrs:{src:n.urlInternal}}):r("span",{staticStyle:{display:"inline-block",padding:"10px 15px"}},[n._v(n._s(n.rawFile?n.rawFile.name:n.urlInternal))])])]:n._e(),n._v(" "),100!==n.percentage?r("el-progress",{attrs:{percentage:n.percentage}}):n._e(),n._v(" "),r("el-upload",{ref:"upload",staticClass:"upload",class:{update:n.urlInternal},attrs:{action:"",drag:n.drag,data:n.data,"before-upload":n.beforeUpload,"http-request":n.requestUpload,"on-progress":n.progressUpload,"on-success":n.successUpload,"on-error":n.errorUpload,accept:n.type&&n.type+"/*",disabled:n.disabled,"show-file-list":!1}},[n.urlInternal&&!n.disabled?r("i",{staticClass:"re-upload-btn el-icon-upload"}):n.disabled?n._e():r("i",{staticClass:"upload-btn el-icon-upload"})]),n._v(" "),n.urlInternal&&n.del&&!n.disabled?r("el-popover-dialog",n._b({staticClass:"icon-delete",attrs:{"btn-show":!1},on:{confirm:n.delConfirm}},"el-popover-dialog",n.$attrs,!1),[r("i",{staticClass:"el-icon-delete",attrs:{slot:"reference"},slot:"reference"})]):n._e(),n._v(" "),n.input?r("el-input",{attrs:{disabled:n.disabled,readonly:n.readonly},on:{blur:function(e){n.setUrl(n.urlInternal)}},model:{value:n.urlInternal,callback:function(e){n.urlInternal=e},expression:"urlInternal"}}):n._e(),n._v(" "),n.tip?r("div",{staticClass:"tip"},[n._v(n._s(n.tip))]):n._e(),n._v(" "),n._t("default")],2)};r._withStripped=!0;var o=t(0),i=t(13),a=t.n(i),l=t(14),u=t.n(l),s={name:"ElSingleUpload",components:{"el-progress":o.Progress,"el-upload":o.Upload,"el-input":o.Input,ElPopoverDialog:u.a},props:{url:{required:!0},upload:{required:!0,type:Function},checkUpload:Function,error:Function,data:{type:Object,default:function(){return{}}},del:{type:Boolean,default:!0},size:{type:Number,default:2048},type:{validator:function(e){return["image","audio","video","text","application",""].includes(e)},default:"image"},disabled:{type:Boolean,default:!1},input:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},drag:{type:Boolean,default:!0},tip:String},data:function(){return{rawFile:null,urlInternal:"",percentage:100}},watch:{url:{immediate:!0,handler:function(e,n){this.setUrl(e)}}},methods:{setUrl:function(e){var n="[object String]"===Object.prototype.toString.call(e);n&&(n=/^https?:\/\//i.test(e)),n?(this.urlInternal=e,this.$nextTick(function(){var e=this;this.$refs.media&&(this.$refs.media.addEventListener("loadedmetadata",function(n){e.$emit("media-duration",e.$refs.media.duration),console.log(e.$refs.media.duration)},!0),this.$refs.media.addEventListener("error",function(n){e.$emit("media-load-error",n)},!0))})):(this.rawFile=null,this.urlInternal="",this.$refs.upload&&this.$refs.upload.clearFiles(),this.$emit("media-duration","")),this.urlInternal!==this.url&&this.$emit("update:url",this.urlInternal)},beforeUpload:function(e){this.rawFile=e;var n=a()(e,this.type,this.size);return this.checkUpload?this.checkUpload(e,n):(n.message&&o.Message.error(n.message),n.validate)},requestUpload:function(e){return console.log("option.data",e.data),this.upload(e)},progressUpload:function(e,n){console.log("event, file",e,n);var t=parseInt(e.percent);t>=100&&(t=99),this.percentage=t},successUpload:function(e,n){console.log("uploadData",e),e&&e.data&&e.data.url&&this.setUrl(e.data.url),this.percentage=100},errorUpload:function(e,n){this.percentage=100,this.error?this.error(e,n):o.Message.error("上传失败")},delConfirm:function(){this.setUrl()}}};t(43);var c=function(e,n,t,r,o,i,a,l){var u,s="function"==typeof e?e.options:e;if(n&&(s.render=n,s.staticRenderFns=t,s._compiled=!0),r&&(s.functional=!0),i&&(s._scopeId="data-v-"+i),a?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},s._ssrRegister=u):o&&(u=l?function(){o.call(this,this.$root.$options.shadowRoot)}:o),u)if(s.functional){s._injectStyles=u;var c=s.render;s.render=function(e,n){return u.call(n),c(e,n)}}else{var p=s.beforeCreate;s.beforeCreate=p?[].concat(p,u):[u]}return{exports:e,options:s}}(s,r,[],!1,null,null,null);c.options.__file="src/ElSingleUpload.vue";n.default=c.exports},function(e,n,t){"use strict";function r(e,n){for(var t=[],r={},o=0;o<n.length;o++){var i=n[o],a=i[0],l={id:e+":"+o,css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(l):t.push(r[a]={id:a,parts:[l]})}return t}t.r(n),t.d(n,"default",function(){return h});var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},a=o&&(document.head||document.getElementsByTagName("head")[0]),l=null,u=0,s=!1,c=function(){},p=null,d="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,n,t,o){s=t,p=o||{};var a=r(e,n);return g(a),function(n){for(var t=[],o=0;o<a.length;o++){var l=a[o];(u=i[l.id]).refs--,t.push(u)}n?g(a=r(e,n)):a=[];for(o=0;o<t.length;o++){var u;if(0===(u=t[o]).refs){for(var s=0;s<u.parts.length;s++)u.parts[s]();delete i[u.id]}}}}function g(e){for(var n=0;n<e.length;n++){var t=e[n],r=i[t.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](t.parts[o]);for(;o<t.parts.length;o++)r.parts.push(y(t.parts[o]));r.parts.length>t.parts.length&&(r.parts.length=t.parts.length)}else{var a=[];for(o=0;o<t.parts.length;o++)a.push(y(t.parts[o]));i[t.id]={id:t.id,refs:1,parts:a}}}}function v(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function y(e){var n,t,r=document.querySelector("style["+d+'~="'+e.id+'"]');if(r){if(s)return c;r.parentNode.removeChild(r)}if(f){var o=u++;r=l||(l=v()),n=m.bind(null,r,o,!1),t=m.bind(null,r,o,!0)}else r=v(),n=function(e,n){var t=n.css,r=n.media,o=n.sourceMap;r&&e.setAttribute("media",r);p.ssrId&&e.setAttribute(d,n.id);o&&(t+="\n/*# sourceURL="+o.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}.bind(null,r),t=function(){r.parentNode.removeChild(r)};return n(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;n(e=r)}else t()}}var b=function(){var e=[];return function(n,t){return e[n]=t,e.filter(Boolean).join("\n")}}();function m(e,n,t,r){var o=t?"":r.css;if(e.styleSheet)e.styleSheet.cssText=b(n,o);else{var i=document.createTextNode(o),a=e.childNodes;a[n]&&e.removeChild(a[n]),a.length?e.insertBefore(i,a[n]):e.appendChild(i)}}}]).ElSingleUpload});