!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("element-ui"),require("@panhezeng/utils/dist/check-upload.js"),require("@panhezeng/utils/dist/get-object-item-by-path.js"),require("@panhezeng/el-popover-dialog")):"function"==typeof define&&define.amd?define("ElSingleUpload",["element-ui","@panhezeng/utils/dist/check-upload.js","@panhezeng/utils/dist/get-object-item-by-path.js","@panhezeng/el-popover-dialog"],n):"object"==typeof exports?exports.ElSingleUpload=n(require("element-ui"),require("@panhezeng/utils/dist/check-upload.js"),require("@panhezeng/utils/dist/get-object-item-by-path.js"),require("@panhezeng/el-popover-dialog")):e.ElSingleUpload=n(e.ELEMENT,e["@panhezeng/utils/dist/check-upload.js"],e["@panhezeng/utils/dist/get-object-item-by-path.js"],e["@panhezeng/el-popover-dialog"])}(window,function(e,n,t,r){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=5)}([function(n,t){n.exports=e},function(e,n,t){var r=t(7);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,t(10).default)("0b99bd7f",r,!1,{})},function(e,t){e.exports=n},function(e,n){e.exports=t},function(e,n){e.exports=r},function(e,n,t){"use strict";t.r(n),t.d(n,"ElSingleUpload",function(){return o});var r,o=t(9).default;function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"!=typeof window&&window.ElSingleUploadOptions;r?console.warn("[ElSingleUpload] already installed. Vue.use(ElSingleUpload) should be called only once."):(r=e,"[object Object]"===Object.prototype.toString.call(n)&&"[object Function]"===Object.prototype.toString.call(n.upload)&&Object.assign(o.props.upload,{required:!1,default:n.upload}),r.component(o.name,o))}o.install=i,"undefined"!=typeof window&&window.Vue&&i(window.Vue)},function(e,n,t){"use strict";var r=t(1);t.n(r).a},function(e,n,t){(e.exports=t(8)(!1)).push([e.i,"\n.el-single-upload {\n  position: relative;\n  width: 300px;\n  height: 90px;\n  display: inline-block;\n}\n.el-single-upload .view {\n  line-height: 1;\n  display: block;\n  border: 1px solid #d9d9d9;\n  width: calc(100% - 2px);\n  height: 100%;\n}\n.el-single-upload .upload {\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  position: relative;\n  line-height: 1;\n}\n.el-single-upload .el-upload-dragger {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: none;\n}\n.el-single-upload .el-upload-dragger .el-icon-upload {\n  font-size: 24px;\n  margin: 0;\n  line-height: normal;\n}\n.el-single-upload.input .view {\n  height: calc(100% - 40px);\n}\n.el-single-upload.input .upload {\n  height: calc(100% - 40px);\n}\n.el-single-upload .el-upload__input {\n  display: none !important;\n}\n.el-single-upload .el-upload {\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.el-single-upload .el-upload:hover {\n  border-color: #20a0ff;\n}\n.el-single-upload .upload.update {\n  position: absolute;\n  top: 0;\n  right: -26px;\n  z-index: 2;\n  width: auto;\n  height: auto;\n}\n.el-single-upload .upload.update .el-upload {\n  padding: 0 1px;\n  width: auto;\n  height: auto;\n  border-left: none;\n  border-radius: 0;\n}\n.el-single-upload .upload-btn {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 28px;\n}\n.el-single-upload .el-icon-upload {\n  font-size: 24px;\n  color: #8c939d;\n  background: #ffffff;\n}\n.el-single-upload .el-icon-upload:hover {\n  color: #20a0ff;\n}\n.el-single-upload .icon-delete {\n  position: absolute;\n  top: 28px;\n  right: -26px;\n  font-size: 24px;\n  cursor: pointer;\n  color: #8c939d;\n  border: 1px dashed #d9d9d9;\n  border-left: none;\n  padding: 0 1px;\n  line-height: 1;\n}\n.el-single-upload .icon-delete:hover {\n  border-color: #20a0ff;\n  color: #20a0ff;\n}\n.el-single-upload .tip {\n  padding: 10px 0;\n  text-align: center;\n}\n.el-single-upload.image,\n.el-single-upload.video {\n  width: 200px;\n  height: 200px;\n}\n.el-single-upload.image .img,\n.el-single-upload.video .img {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n}\n",""])},function(e,n){e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var t=function(e,n){var t=e[1]||"",r=e[3];if(!r)return t;if(n&&"function"==typeof btoa){var o=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r),i=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[t].concat(i).concat([o]).join("\n")}return[t].join("\n")}(n,e);return n[2]?"@media "+n[2]+"{"+t+"}":t}).join("")},n.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var l=e[o];"number"==typeof l[0]&&r[l[0]]||(t&&!l[2]?l[2]=t:t&&(l[2]="("+l[2]+") and ("+t+")"),n.push(l))}},n}},function(e,n,t){"use strict";t.r(n);var r=function(){var e,n=this,t=n.$createElement,r=n._self._c||t;return r("div",{staticClass:"el-single-upload",class:(e={input:n.input},e[n.type]=!0,e)},[n.urlInternal?["video"===n.type?r("video",{ref:"media",staticClass:"view",attrs:{controls:"",src:n.urlInternal}}):"audio"===n.type?r("audio",{ref:"media",staticClass:"view",attrs:{controls:"",src:n.urlInternal}}):r("a",{staticClass:"view",attrs:{href:n.urlInternal,target:"_blank"}},["image"===n.type?r("img",{staticClass:"img",attrs:{src:n.urlInternal}}):r("span",{staticStyle:{display:"inline-block",padding:"10px 15px"}},[n._v(n._s(n.file?n.file.name:n.urlInternal))])])]:n._e(),n._v(" "),100!==n.percentage?r("el-progress",{attrs:{percentage:n.percentage}}):n._e(),n._v(" "),n.$attrs.disabled?n._e():r("el-upload",n._b({ref:"upload",staticClass:"upload",class:{update:n.urlInternal},attrs:{action:"","before-upload":n.beforeUpload,"http-request":n.requestUpload,"on-progress":n.progressUpload,"on-success":n.successUpload,"on-error":n.errorUpload,accept:n.accept,drag:n.drag,multiple:!1,"show-file-list":!1}},"el-upload",n.$attrs,!1),[n.urlInternal?r("i",{staticClass:"re-upload-btn el-icon-upload"}):r("i",{staticClass:"upload-btn el-icon-upload"})]),n._v(" "),n.urlInternal&&n.del&&!n.$attrs.disabled?r("el-popover-dialog",n._b({staticClass:"icon-delete",attrs:{"btn-show":!1},on:{confirm:n.delConfirm}},"el-popover-dialog",n.$attrs,!1),[r("i",{staticClass:"el-icon-delete",attrs:{slot:"reference"},slot:"reference"})]):n._e(),n._v(" "),n.input?r("el-input",{attrs:{placeholder:n.$attrs.placeholder||"文件链接地址",disabled:n.$attrs.disabled,readonly:n.readonly},on:{blur:function(e){n.setUrl(n.urlInternal)}},model:{value:n.urlInternal,callback:function(e){n.urlInternal=e},expression:"urlInternal"}}):n._e(),n._v(" "),n.tip?r("div",{staticClass:"tip"},[n._v(n._s(n.tip))]):n._e(),n._v(" "),n._t("default")],2)};r._withStripped=!0;var o=t(0),i=t(2),l=t.n(i),a=t(3),s=t.n(a),d=t(4),u=t.n(d),p={name:"ElSingleUpload",components:{"el-progress":o.Progress,"el-upload":o.Upload,"el-input":o.Input,ElPopoverDialog:u.a},inheritAttrs:!1,props:{upload:{required:!0,type:Function},resPathOfUrl:{type:String,default:"data.url"},url:{required:!0},checkUpload:Function,error:Function,del:{type:Boolean,default:!0},size:{type:Number,default:2048},type:{validator:function(e){return""===e||/^(image|audio|video|text|application)/.test(e)},default:"image"},input:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},drag:{type:Boolean,default:!0},tip:String},data:function(){return{file:null,urlInternal:"",percentage:100}},watch:{url:{immediate:!0,handler:function(e,n){this.setUrl(e)}}},computed:{accept:function(){return""===this.type||String(this.type).includes("/")?this.type:"".concat(this.type,"/*")}},methods:{setUrl:function(e){var n="[object String]"===Object.prototype.toString.call(e);n&&(n=/^https?:\/\//i.test(e)),n?(this.urlInternal=e,this.$nextTick(function(){var e=this;this.$refs.media&&(this.$refs.media.addEventListener("loadedmetadata",function(n){e.$emit("media-duration",e.$refs.media.duration),console.log(e.$refs.media.duration)},!0),this.$refs.media.addEventListener("error",function(n){e.$emit("media-load-error",n)},!0))})):(this.file=null,this.urlInternal="",this.$refs.upload&&this.$refs.upload.clearFiles(),this.$emit("media-duration","")),this.urlInternal!==this.url&&this.$emit("update:url",this.urlInternal)},beforeUpload:function(e){this.file=e;var n=l()(e,this.type,this.size);return this.checkUpload?this.checkUpload(e,n):(n.message&&o.Message.error(n.message),n.validate)},requestUpload:function(e){return console.log("option.data",e.data),this.upload(e)},progressUpload:function(e,n){console.log("event, file",e,n);var t=parseInt(e.percent);t>=100&&(t=99),this.percentage=t},successUpload:function(e){console.log("response",e),this.setUrl(s()(e,this.resPathOfUrl)),this.percentage=100},errorUpload:function(e,n){this.percentage=100,this.error?this.error(e,n):o.Message.error("上传失败")},delConfirm:function(){this.setUrl()}}};t(6);var c=function(e,n,t,r,o,i,l,a){var s,d="function"==typeof e?e.options:e;if(n&&(d.render=n,d.staticRenderFns=t,d._compiled=!0),r&&(d.functional=!0),i&&(d._scopeId="data-v-"+i),l?(s=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},d._ssrRegister=s):o&&(s=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),s)if(d.functional){d._injectStyles=s;var u=d.render;d.render=function(e,n){return s.call(n),u(e,n)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,s):[s]}return{exports:e,options:d}}(p,r,[],!1,null,null,null);c.options.__file="src/ElSingleUpload.vue";n.default=c.exports},function(e,n,t){"use strict";function r(e,n){for(var t=[],r={},o=0;o<n.length;o++){var i=n[o],l=i[0],a={id:e+":"+o,css:i[1],media:i[2],sourceMap:i[3]};r[l]?r[l].parts.push(a):t.push(r[l]={id:l,parts:[a]})}return t}t.r(n),t.d(n,"default",function(){return h});var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},l=o&&(document.head||document.getElementsByTagName("head")[0]),a=null,s=0,d=!1,u=function(){},p=null,c="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,n,t,o){d=t,p=o||{};var l=r(e,n);return g(l),function(n){for(var t=[],o=0;o<l.length;o++){var a=l[o];(s=i[a.id]).refs--,t.push(s)}n?g(l=r(e,n)):l=[];for(o=0;o<t.length;o++){var s;if(0===(s=t[o]).refs){for(var d=0;d<s.parts.length;d++)s.parts[d]();delete i[s.id]}}}}function g(e){for(var n=0;n<e.length;n++){var t=e[n],r=i[t.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](t.parts[o]);for(;o<t.parts.length;o++)r.parts.push(m(t.parts[o]));r.parts.length>t.parts.length&&(r.parts.length=t.parts.length)}else{var l=[];for(o=0;o<t.parts.length;o++)l.push(m(t.parts[o]));i[t.id]={id:t.id,refs:1,parts:l}}}}function v(){var e=document.createElement("style");return e.type="text/css",l.appendChild(e),e}function m(e){var n,t,r=document.querySelector("style["+c+'~="'+e.id+'"]');if(r){if(d)return u;r.parentNode.removeChild(r)}if(f){var o=s++;r=a||(a=v()),n=y.bind(null,r,o,!1),t=y.bind(null,r,o,!0)}else r=v(),n=function(e,n){var t=n.css,r=n.media,o=n.sourceMap;r&&e.setAttribute("media",r);p.ssrId&&e.setAttribute(c,n.id);o&&(t+="\n/*# sourceURL="+o.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}.bind(null,r),t=function(){r.parentNode.removeChild(r)};return n(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;n(e=r)}else t()}}var b=function(){var e=[];return function(n,t){return e[n]=t,e.filter(Boolean).join("\n")}}();function y(e,n,t,r){var o=t?"":r.css;if(e.styleSheet)e.styleSheet.cssText=b(n,o);else{var i=document.createTextNode(o),l=e.childNodes;l[n]&&e.removeChild(l[n]),l.length?e.insertBefore(i,l[n]):e.appendChild(i)}}}]).ElSingleUpload});