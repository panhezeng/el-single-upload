!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("element-ui"),require("@panhezeng/utils/dist/check-upload.js"),require("@panhezeng/utils/dist/get-object-item-by-path.js"),require("@panhezeng/el-popover-dialog")):"function"==typeof define&&define.amd?define("ElSingleUpload",["element-ui","@panhezeng/utils/dist/check-upload.js","@panhezeng/utils/dist/get-object-item-by-path.js","@panhezeng/el-popover-dialog"],t):"object"==typeof exports?exports.ElSingleUpload=t(require("element-ui"),require("@panhezeng/utils/dist/check-upload.js"),require("@panhezeng/utils/dist/get-object-item-by-path.js"),require("@panhezeng/el-popover-dialog")):e.ElSingleUpload=t(e.ELEMENT,e["@panhezeng/utils/dist/check-upload.js"],e["@panhezeng/utils/dist/get-object-item-by-path.js"],e["@panhezeng/el-popover-dialog"])}(window,function(e,t,n,r){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(t,n){t.exports=e},function(e,t,n){var r=n(7);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(10).default)("0b99bd7f",r,!1,{})},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t,n){"use strict";n.r(t),n.d(t,"ElSingleUpload",function(){return i});var r,i=n(9).default;function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"!=typeof window&&window.ElSingleUploadOptions;r?console.warn("[ElSingleUpload] already installed. Vue.use(ElSingleUpload) should be called only once."):(r=e,"[object Object]"===Object.prototype.toString.call(t)&&"[object Function]"===Object.prototype.toString.call(t.upload)&&Object.assign(i.props.upload,{required:!1,default:t.upload}),r.component(i.name,i))}i.install=o,"undefined"!=typeof window&&window.Vue&&o(window.Vue)},function(e,t,n){"use strict";var r=n(1);n.n(r).a},function(e,t,n){(e.exports=n(8)(!1)).push([e.i,"\n.el-single-upload {\n  position: relative;\n  width: 300px;\n  height: 90px;\n  display: inline-block;\n}\n.el-single-upload .view {\n  line-height: 1;\n  display: block;\n  border: 1px solid #d9d9d9;\n  width: calc(100% - 2px);\n  height: 100%;\n}\n.el-single-upload .upload {\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  position: relative;\n  line-height: 1;\n}\n.el-single-upload .el-upload-dragger {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: none;\n}\n.el-single-upload .el-upload-dragger .el-icon-upload {\n  font-size: 24px;\n  margin: 0 0 0 2px;\n  line-height: normal;\n}\n.el-single-upload.input .view {\n  height: calc(100% - 40px);\n}\n.el-single-upload.input .upload {\n  height: calc(100% - 40px);\n}\n.el-single-upload .el-upload__input {\n  display: none !important;\n}\n.el-single-upload .el-upload {\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.el-single-upload .el-upload:hover {\n  border-color: #20a0ff;\n}\n.el-single-upload .upload.update {\n  position: absolute;\n  top: 0;\n  right: -28px;\n  z-index: 2;\n  width: auto;\n  height: auto;\n}\n.el-single-upload .upload.update .el-upload {\n  padding: 0 1px;\n  width: auto;\n  height: auto;\n  border-left: none;\n  border-radius: 0;\n}\n.el-single-upload .upload-btn {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 28px;\n}\n.el-single-upload .el-icon-upload {\n  font-size: 24px;\n  color: #8c939d;\n  background: #ffffff;\n}\n.el-single-upload .el-icon-upload:hover {\n  color: #20a0ff;\n}\n.el-single-upload .icon-delete {\n  position: absolute;\n  top: 28px;\n  right: -28px;\n  font-size: 24px;\n  cursor: pointer;\n  color: #8c939d;\n  border: 1px dashed #d9d9d9;\n  border-left: none;\n  padding: 0 1px;\n  line-height: 1;\n}\n.el-single-upload .icon-delete:hover {\n  border-color: #20a0ff;\n  color: #20a0ff;\n}\n.el-single-upload .icon-delete .el-icon-delete {\n  margin-left: 2px;\n}\n.el-single-upload .tip {\n  padding: 10px 0;\n  text-align: center;\n}\n.el-single-upload.image,\n.el-single-upload.video {\n  width: 200px;\n  height: 200px;\n}\n.el-single-upload.image .img,\n.el-single-upload.video .img {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n}\n",""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r),o=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(o).concat([i]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var l=e[i];"number"==typeof l[0]&&r[l[0]]||(n&&!l[2]?l[2]=n:n&&(l[2]="("+l[2]+") and ("+n+")"),t.push(l))}},t}},function(e,t,n){"use strict";n.r(t);var r=function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{staticClass:"el-single-upload",class:(e={input:t.input},e[t.type]=!0,e)},[t.urlInternal?["video"===t.type?r("video",{ref:"media",staticClass:"view",attrs:{controls:"",src:t.urlInternal}}):"audio"===t.type?r("audio",{ref:"media",staticClass:"view",attrs:{controls:"",src:t.urlInternal}}):r("a",{staticClass:"view",attrs:{href:t.urlInternal,target:"_blank"}},["image"===t.type?r("img",{staticClass:"img",attrs:{src:t.urlInternal}}):r("span",{staticStyle:{display:"inline-block",padding:"10px 15px"}},[t._v(t._s(t.file?t.file.name:t.urlInternal))])])]:t._e(),t._v(" "),100!==t.percentage?r("el-progress",{attrs:{percentage:t.percentage}}):t._e(),t._v(" "),t.$attrs.disabled?t._e():r("el-upload",t._b({ref:"upload",staticClass:"upload",class:{update:t.urlInternal},attrs:{action:"","before-upload":t.beforeUpload,"http-request":t.requestUpload,"on-progress":t.progressUpload,"on-success":t.successUpload,"on-error":t.errorUpload,accept:t.accept,drag:t.drag,multiple:!1,"show-file-list":!1}},"el-upload",t.$attrs,!1),[t.urlInternal?r("i",{staticClass:"re-upload-btn el-icon-upload"}):r("i",{staticClass:"upload-btn el-icon-upload"})]),t._v(" "),t.urlInternal&&t.del&&!t.$attrs.disabled?r("el-popover-dialog",t._b({staticClass:"icon-delete",attrs:{"btn-show":!1},on:{confirm:t.delConfirm}},"el-popover-dialog",t.$attrs,!1),[r("i",{staticClass:"el-icon-delete",attrs:{slot:"reference"},slot:"reference"})]):t._e(),t._v(" "),t.input?r("el-input",{attrs:{placeholder:t.$attrs.placeholder||"文件链接地址",disabled:t.$attrs.disabled,readonly:t.readonly},on:{blur:function(e){t.setUrl(t.urlInternal)}},model:{value:t.urlInternal,callback:function(e){t.urlInternal=e},expression:"urlInternal"}}):t._e(),t._v(" "),t.tip?r("div",{staticClass:"tip"},[t._v(t._s(t.tip))]):t._e(),t._v(" "),t._t("default")],2)};r._withStripped=!0;var i=n(0),o=n(2),l=n.n(o),a=n(3),s=n.n(a),d=n(4),u=n.n(d),p={name:"ElSingleUpload",components:{"el-progress":i.Progress,"el-upload":i.Upload,"el-input":i.Input,ElPopoverDialog:u.a},inheritAttrs:!1,props:{upload:{required:!0,type:Function},resPathOfUrl:{type:String,default:"data.url"},url:{required:!0},checkUpload:Function,error:Function,del:{type:Boolean,default:!0},size:{type:Number,default:2048},type:{validator:function(e){return""===e||/^(image|audio|video|text|application)/.test(e)},default:"image"},input:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},drag:{type:Boolean,default:!0},tip:String},data:function(){return{file:null,urlInternal:"",percentage:100}},watch:{url:{immediate:!0,handler:function(e,t){this.setUrl(e)}}},computed:{accept:function(){return""===this.type||String(this.type).includes("/")?this.type:"".concat(this.type,"/*")}},methods:{setUrl:function(e){var t="[object String]"===Object.prototype.toString.call(e);t&&(t=/^https?:\/\//i.test(e)),t?(this.urlInternal=e,this.$nextTick(function(){var e=this;this.$refs.media&&(this.$refs.media.addEventListener("loadedmetadata",function(t){e.$emit("media-duration",e.$refs.media.duration)},!0),this.$refs.media.addEventListener("error",function(t){e.$emit("media-load-error",t)},!0))})):(this.file=null,this.urlInternal="",this.$refs.upload&&this.$refs.upload.clearFiles(),this.$emit("media-duration","")),this.urlInternal!==this.url&&this.$emit("update:url",this.urlInternal)},beforeUpload:function(e){this.file=e;var t=l()(e,this.type,this.size);return this.checkUpload?this.checkUpload(e,t):(t.message&&i.Message.error(t.message),t.validate)},requestUpload:function(e){return this.$emit("request-upload",e),this.upload(e)},progressUpload:function(e,t){var n=parseInt(e.percent);n>=100&&(n=99),this.percentage=n},successUpload:function(e){this.setUrl(s()(e,this.resPathOfUrl)),this.percentage=100,this.$emit("success-upload",e),this.$emit("finish-upload")},errorUpload:function(e,t){this.percentage=100,this.error?this.error(e,t):i.Message.error("上传失败"),this.$emit("error-upload",{err:e,file:t}),this.$emit("finish-upload")},delConfirm:function(){this.setUrl()}}};n(6);var c=function(e,t,n,r,i,o,l,a){var s,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=n,d._compiled=!0),r&&(d.functional=!0),o&&(d._scopeId="data-v-"+o),l?(s=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},d._ssrRegister=s):i&&(s=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),s)if(d.functional){d._injectStyles=s;var u=d.render;d.render=function(e,t){return s.call(t),u(e,t)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,s):[s]}return{exports:e,options:d}}(p,r,[],!1,null,null,null);c.options.__file="src/ElSingleUpload.vue";t.default=c.exports},function(e,t,n){"use strict";function r(e,t){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],l=o[0],a={id:e+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[l]?r[l].parts.push(a):n.push(r[l]={id:l,parts:[a]})}return n}n.r(t),n.d(t,"default",function(){return h});var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},l=i&&(document.head||document.getElementsByTagName("head")[0]),a=null,s=0,d=!1,u=function(){},p=null,c="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,t,n,i){d=n,p=i||{};var l=r(e,t);return g(l),function(t){for(var n=[],i=0;i<l.length;i++){var a=l[i];(s=o[a.id]).refs--,n.push(s)}t?g(l=r(e,t)):l=[];for(i=0;i<n.length;i++){var s;if(0===(s=n[i]).refs){for(var d=0;d<s.parts.length;d++)s.parts[d]();delete o[s.id]}}}}function g(e){for(var t=0;t<e.length;t++){var n=e[t],r=o[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(m(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var l=[];for(i=0;i<n.parts.length;i++)l.push(m(n.parts[i]));o[n.id]={id:n.id,refs:1,parts:l}}}}function v(){var e=document.createElement("style");return e.type="text/css",l.appendChild(e),e}function m(e){var t,n,r=document.querySelector("style["+c+'~="'+e.id+'"]');if(r){if(d)return u;r.parentNode.removeChild(r)}if(f){var i=s++;r=a||(a=v()),t=y.bind(null,r,i,!1),n=y.bind(null,r,i,!0)}else r=v(),t=function(e,t){var n=t.css,r=t.media,i=t.sourceMap;r&&e.setAttribute("media",r);p.ssrId&&e.setAttribute(c,t.id);i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var b=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function y(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=b(t,i);else{var o=document.createTextNode(i),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(o,l[t]):e.appendChild(o)}}}]).ElSingleUpload});